<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Atelier Maternelle ‚Ä¢ Compter 1‚Äì5 ‚Ä¢ Alphabet ‚Ä¢ Coloriage</title>
<meta name="color-scheme" content="light">
<style>
  :root{
    --bg:#FFFDF7;
    --card:#FFFFFF;
    --ink:#24313F;
    --muted:#5A6B7B;
    --accent:#FF7A59;
    --accent-2:#5DD39E;
    --accent-3:#6C8AE4;
    --accent-4:#FFC857;
    --ok:#34C759;
    --bad:#FF3B30;
    --shadow: 0 6px 20px rgba(0,0,0,.08);
    --radius:16px;
    --gap: clamp(10px, 2vw, 18px);
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0; background:linear-gradient(180deg, #FFFDF7, #FFF7EC);
    color:var(--ink); font: 500 18px/1.4 system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji";
  }
  header{
    position:sticky; top:0; z-index: 20; backdrop-filter: blur(6px);
    background: rgba(255,253,247,.75); border-bottom:1px solid #f0e9da;
  }
  .bar{
    max-width: 1200px; margin:auto; padding:12px var(--gap);
    display:flex; align-items:center; gap: var(--gap); flex-wrap: wrap;
  }
  .title{font-weight:800; letter-spacing:.2px; display:flex; align-items:center; gap:10px}
  .title .logo{width:38px; height:38px; border-radius:10px; display:grid; place-items:center;
    background: conic-gradient(from 210deg, var(--accent), var(--accent-4), var(--accent-2), var(--accent-3), var(--accent));
    color:white; font-weight:900; box-shadow: var(--shadow);
  }
  .grow{flex:1}
  select, button{
    font:inherit; padding:12px 16px; border-radius:12px; border:2px solid #e8e2d3; background:#fff;
    cursor:pointer; transition:.15s transform ease, .2s box-shadow ease; box-shadow: var(--shadow);
  }
  button.primary{ background: var(--accent); color:white; border-color: transparent; }
  button.ghost{ background: #fff; }
  button:active{ transform: translateY(1px) }
  main{ max-width: 1200px; margin: calc(var(--gap)*1.2) auto; padding: 0 var(--gap) var(--gap); }
  .card{
    background: var(--card); border-radius: var(--radius); box-shadow: var(--shadow);
    padding: clamp(14px, 3vw, 28px);
  }
  .grid{
    display:grid; gap: var(--gap);
    grid-template-columns: repeat(12, 1fr);
  }
  .col-12{ grid-column: span 12 }
  .col-8 { grid-column: span 8 }
  .col-4 { grid-column: span 4 }
  @media (max-width: 900px){
    .col-8, .col-4{ grid-column: span 12 }
  }
  .section{ display:none }
  .section.active{ display:block; animation: fade .25s ease }
  @keyframes fade{ from{opacity:0; transform: translateY(6px)} to{opacity:1; transform:none} }

  /* COMPTER */
  .count-area{
    display:grid; place-items:center; gap:18px; min-height: 280px;
  }
  .objects{ display:flex; flex-wrap:wrap; gap:12px; justify-content:center}
  .obj{
    width: clamp(58px, 9vw, 78px); height: clamp(58px, 9vw, 78px);
    border-radius: 16px; display:grid; place-items:center; font-size: clamp(28px, 6vw, 46px);
    background: #fff; border:2px dashed #E8E2D3;
  }
  .choices{ display:flex; gap:10px; justify-content:center; flex-wrap:wrap }
  .num-btn{
    width:64px; height:64px; border-radius:16px; font-size:22px; font-weight:800;
    background:var(--accent-3); color:#fff; border:none;
  }
  .num-btn.alt{ background: var(--accent-2); color:#083B2B }

  .feedback{ text-align:center; font-weight:800; min-height: 28px }
  .good{ color: var(--ok) } .bad{ color: var(--bad) }

  /* ALPHABET */
  .alpha-top{ display:flex; gap: var(--gap); align-items:center; justify-content:center; flex-wrap:wrap }
  .big-letter{
    font-weight:900; font-size: clamp(72px, 14vw, 160px);
    line-height:1; padding: 8px 22px; border-radius: 22px;
    background: #fff; border: 3px solid #efeadc; box-shadow: var(--shadow);
  }
  .alpha-controls{ display:flex; gap:10px; justify-content:center; flex-wrap:wrap }
  .alpha-grid{
    margin-top:18px; display:grid; grid-template-columns: repeat(6, minmax(40px, 1fr));
    gap:10px; justify-items: center;
  }
  .alpha-cell{
    width: clamp(46px, 10vw, 66px); height: clamp(46px, 10vw, 66px);
    border-radius: 14px; display:grid; place-items:center; font-weight:800;
    font-size: clamp(20px, 4.4vw, 28px); background:#fff; border:2px solid #e8e2d3; cursor:pointer;
  }
  .alpha-cell.mark{ outline:4px solid var(--accent-4) }

  /* COLORIAGE */
  .paint-wrap{ display:grid; gap: var(--gap); grid-template-columns: 280px 1fr }
  @media (max-width: 900px){ .paint-wrap{ grid-template-columns: 1fr } }
  .palette{ display:flex; gap:10px; flex-wrap:wrap; align-content:start }
  .swatch{
    width:44px; height:44px; border-radius: 12px; border:2px solid #e8e2d3; cursor:pointer; box-shadow: var(--shadow)
  }
  .swatch.selected{ outline: 4px solid #3333 }
  .canvas{
    background: #fff; border-radius: 16px; padding: 16px; border:2px solid #efe8d8; box-shadow: var(--shadow);
    display:grid; place-items:center;
  }
  svg{ max-width: 100%; height: auto }
  .paintable{ cursor:pointer; transition: .15s opacity ease }
  .paintable:hover{ opacity:.9 }

  /* UTIL */
  .toolbar{ display:flex; gap:10px; flex-wrap:wrap; justify-content:center; margin-top: 10px }
  .sr{ position:absolute; left:-9999px }
  .confetti{ position:fixed; inset:0; pointer-events:none; overflow:hidden; z-index:30 }
  .piece{ position:absolute; width:10px; height:18px; border-radius:4px; opacity:.9; mix-blend-mode:multiply }
  @media print{
    header, .toolbar{ display:none !important }
    body{ background:#fff }
    .card{ box-shadow:none; border:1px solid #ddd }
  }
</style>
</head>
<body>
  <header>
    <div class="bar">
      <div class="title">
        <div class="logo" aria-hidden="true">üéà</div>
        <div>Atelier Maternelle</div>
      </div>
      <div class="grow"></div>
      <label for="sectionSel" class="sr">Choisir une activit√©</label>
      <select id="sectionSel" title="Choisir une activit√©">
        <option value="count">Compter 1‚Äì5</option>
        <option value="alpha">Alphabet</option>
        <option value="paint">Coloriage</option>
      </select>
      <button id="printBtn" class="ghost" title="Imprimer">üñ®Ô∏è Imprimer</button>
    </div>
  </header>

  <main class="grid">
    <section id="count" class="section active col-12 card" aria-labelledby="count-h">
      <h2 id="count-h">Compter jusqu‚Äô√† 5</h2>
      <p>Regarde les objets et <strong>clique le bon nombre</strong>.</p>
      <div class="count-area">
        <div id="objects" class="objects" aria-label="Objets √† compter"></div>
        <div class="choices" role="group" aria-label="Choisir un nombre">
          <button class="num-btn">1</button>
          <button class="num-btn alt">2</button>
          <button class="num-btn">3</button>
          <button class="num-btn alt">4</button>
          <button class="num-btn">5</button>
        </div>
        <div id="fbCount" class="feedback" aria-live="polite"></div>
        <div class="toolbar">
          <button id="newCount" class="primary">Nouvelle question</button>
          <button id="resetCount" class="ghost">R√©initialiser</button>
        </div>
      </div>
    </section>

    <section id="alpha" class="section col-12 card" aria-labelledby="alpha-h">
      <h2 id="alpha-h">Alphabet</h2>
      <div class="alpha-top">
        <div id="bigLetter" class="big-letter" aria-live="polite" aria-atomic="true">A</div>
      </div>

      <div class="alpha-controls toolbar">
        <button id="prevL" class="ghost" title="Lettre pr√©c√©dente">‚¨ÖÔ∏è</button>
        <button id="sayL" class="primary" title="Entendre la lettre">üîä √âcouter</button>
        <button id="nextL" class="ghost" title="Lettre suivante">‚û°Ô∏è</button>
        <select id="alphaRange" title="Plage de lettres">
          <option value="A-E">A‚ÄìE</option>
          <option value="A-J" selected>A‚ÄìJ</option>
          <option value="A-Z">A‚ÄìZ</option>
        </select>
      </div>

      <h3 style="margin-top:16px">Je retrouve la lettre demand√©e</h3>
      <p>Consigne : clique sur <strong>toutes</strong> les <span id="askLetter">A</span>.</p>
      <div id="alphaGrid" class="alpha-grid" aria-label="Grille de lettres"></div>
      <div id="fbAlpha" class="feedback" aria-live="polite"></div>
      <div class="toolbar">
        <button id="newAlpha" class="primary">Nouvelle grille</button>
        <button id="resetAlpha" class="ghost">R√©initialiser</button>
      </div>
    </section>

    <section id="paint" class="section col-12 card" aria-labelledby="paint-h">
      <h2 id="paint-h">Coloriage</h2>
      <div class="paint-wrap">
        <div>
          <p>Choisis une couleur puis <strong>clique</strong> une partie du dessin.</p>
          <div id="palette" class="palette" role="group" aria-label="Palette de couleurs"></div>
          <div class="toolbar">
            <button id="clearPaint" class="ghost">Effacer</button>
          </div>
        </div>
        <div class="canvas">
          <!-- Fleur simple en SVG -->
          <svg id="flower" viewBox="0 0 300 300" role="img" aria-label="Fleur √† colorier">
            <defs>
              <radialGradient id="g" cx="50%" cy="50%" r="50%">
                <stop offset="0%" stop-color="#fff7d6"/>
                <stop offset="100%" stop-color="#ffd14d"/>
              </radialGradient>
            </defs>
            <!-- C≈ìur -->
            <circle class="paintable" data-default="url(#g)" cx="150" cy="150" r="28" fill="url(#g)" stroke="#E7C14A" stroke-width="3"/>
            <!-- P√©tales -->
            <ellipse class="paintable" cx="150" cy="80" rx="28" ry="46" fill="#FEE4E2" stroke="#F4A6A0" stroke-width="3"/>
            <ellipse class="paintable" cx="210" cy="110" rx="28" ry="46" transform="rotate(30 210 110)" fill="#E7F0FF" stroke="#ABC3F7" stroke-width="3"/>
            <ellipse class="paintable" cx="90" cy="110" rx="28" ry="46" transform="rotate(-30 90 110)" fill="#EAF9F0" stroke="#94D9BA" stroke-width="3"/>
            <ellipse class="paintable" cx="150" cy="220" rx="28" ry="46" fill="#FFF1D6" stroke="#F7CA86" stroke-width="3"/>
            <ellipse class="paintable" cx="220" cy="180" rx="28" ry="46" transform="rotate(55 220 180)" fill="#F3E6FF" stroke="#CDB7F8" stroke-width="3"/>
            <ellipse class="paintable" cx="80" cy="180" rx="28" ry="46" transform="rotate(-55 80 180)" fill="#EFFFF3" stroke="#A0E3B4" stroke-width="3"/>
            <!-- Tige + feuilles -->
            <rect class="paintable" x="145" y="190" width="10" height="80" rx="5" fill="#A7E495" stroke="#6FBC66" stroke-width="3"/>
            <ellipse class="paintable" cx="118" cy="215" rx="28" ry="14" fill="#D5F5D3" stroke="#95D08E" stroke-width="3"/>
            <ellipse class="paintable" cx="180" cy="235" rx="28" ry="14" fill="#D5F5D3" stroke="#95D08E" stroke-width="3"/>
            <!-- Herbe -->
            <rect class="paintable" x="0" y="270" width="300" height="30" fill="#E2F8D3" />
          </svg>
        </div>
      </div>
    </section>
  </main>

  <div id="confetti" class="confetti" aria-hidden="true"></div>

<script>
/* ---------- Utilitaires ---------- */
const $ = (sel, root=document) => root.querySelector(sel);
const $$ = (sel, root=document) => [...root.querySelectorAll(sel)];
const say = (text) => {
  try{
    const u = new SpeechSynthesisUtterance(text);
    u.lang = "fr-FR";
    speechSynthesis.cancel();
    speechSynthesis.speak(u);
  }catch(e){}
};
function confettiBurst(colors=["#FF7A59","#5DD39E","#6C8AE4","#FFC857","#FF89C0"]){
  const box = $("#confetti"); box.innerHTML="";
  const N = 40;
  for(let i=0;i<N;i++){
    const p = document.createElement("div");
    p.className="piece";
    p.style.background = colors[i%colors.length];
    p.style.left = Math.random()*100+"%";
    p.style.top = "-10px";
    const tx = (Math.random()*100-50)+"vw";
    const ty = (80+Math.random()*20)+"vh";
    const rot = (Math.random()*720-360);
    const dur = 700 + Math.random()*900;
    p.animate([
      { transform:`translate(0,0) rotate(0deg)`, opacity:1 },
      { transform:`translate(${tx}, ${ty}) rotate(${rot}deg)`, opacity:0.9 }
    ], { duration: dur, easing:"cubic-bezier(.2,.8,.2,1)" });
    box.appendChild(p);
  }
  setTimeout(()=> box.innerHTML="", 1200);
}

/* ---------- Navigation ---------- */
const sectionSel = $("#sectionSel");
const sections = $$(".section");
sectionSel.addEventListener("change", ()=>{
  sections.forEach(s=> s.classList.remove("active"));
  $("#"+sectionSel.value).classList.add("active");
});
$("#printBtn").addEventListener("click", ()=> window.print());

/* ---------- COMPTER 1‚Äì5 ---------- */
const objects = $("#objects");
const fbCount = $("#fbCount");
const emojis = ["‚≠ê","üçé","üü¢","üß°","üéà","üß©","üê£","üåº","üç™","ü´ê"];
function newCounting(){
  fbCount.textContent = "";
  const n = 1 + Math.floor(Math.random()*5);
  objects.dataset.answer = n;
  objects.innerHTML="";
  const pick = emojis[Math.floor(Math.random()*emojis.length)];
  for(let i=0;i<n;i++){
    const d = document.createElement("div");
    d.className="obj";
    d.textContent = pick;
    objects.appendChild(d);
  }
}
newCounting();
$$(".num-btn").forEach(b=>{
  b.addEventListener("click", ()=>{
    const val = parseInt(b.textContent,10);
    const ans = parseInt(objects.dataset.answer,10);
    if(val===ans){
      fbCount.innerHTML = "<span class='good'>Bravo !</span>";
      say("Bravo !");
      confettiBurst();
      setTimeout(newCounting, 700);
    }else{
      fbCount.innerHTML = "<span class='bad'>Essaie encore</span>";
      say("Essaie encore");
    }
  });
});
$("#newCount").addEventListener("click", newCounting);
$("#resetCount").addEventListener("click", ()=>{
  newCounting();
  fbCount.textContent="";
});

/* ---------- ALPHABET ---------- */
const alphaRangeSel = $("#alphaRange");
const bigLetter = $("#bigLetter");
const alphaGrid = $("#alphaGrid");
const fbAlpha = $("#fbAlpha");
const askLetterSpan = $("#askLetter");
let letters = [];
let idx = 0;
function setRange(){
  const v = alphaRangeSel.value;
  if(v==="A-E") letters = "ABCDE".split("");
  else if(v==="A-J") letters = "ABCDEFGHIJ".split("");
  else letters = "ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("");
  idx = 0;
  updateBigLetter();
  newAlphaGrid();
}
function updateBigLetter(){
  bigLetter.textContent = letters[idx];
}
$("#prevL").addEventListener("click", ()=>{
  idx = (idx-1+letters.length)%letters.length;
  updateBigLetter(); say(letters[idx]);
});
$("#nextL").addEventListener("click", ()=>{
  idx = (idx+1)%letters.length;
  updateBigLetter(); say(letters[idx]);
});
$("#sayL").addEventListener("click", ()=> say(letters[idx]));
alphaRangeSel.addEventListener("change", setRange);

function newAlphaGrid(){
  fbAlpha.textContent="";
  // lettre √† chercher (maj/min al√©atoire)
  const L = letters[Math.floor(Math.random()*letters.length)];
  askLetterSpan.textContent = L;
  const pool = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";
  const cells = [];
  for(let i=0;i<30;i++){
    const pick = Math.random()<0.28 ? L : pool[Math.floor(Math.random()*26)];
    const upper = Math.random()<0.5;
    cells.push( upper ? pick.toUpperCase() : pick.toLowerCase() );
  }
  alphaGrid.innerHTML = "";
  let remaining = cells.filter(c=> c.toUpperCase()===L).length;
  cells.forEach(ch=>{
    const c = document.createElement("button");
    c.className = "alpha-cell";
    c.setAttribute("aria-pressed","false");
    c.textContent = ch;
    c.addEventListener("click", ()=>{
      if(c.classList.contains("mark")) return;
      if(ch.toUpperCase()===L){
        c.classList.add("mark");
        c.setAttribute("aria-pressed","true");
        remaining--;
        if(remaining<=0){
          fbAlpha.innerHTML = "<span class='good'>Super ! Mission lettres r√©ussie üéâ</span>";
          say("Super !");
          confettiBurst();
          setTimeout(newAlphaGrid, 900);
        }
      }else{
        fbAlpha.innerHTML = "<span class='bad'>Oups, ce n‚Äôest pas la bonne lettre</span>";
        say("Oups, ce n‚Äôest pas la bonne lettre");
      }
    });
    alphaGrid.appendChild(c);
  });
}
$("#newAlpha").addEventListener("click", newAlphaGrid);
$("#resetAlpha").addEventListener("click", ()=>{
  setRange(); fbAlpha.textContent="";
});
setRange();

/* ---------- COLORIAGE ---------- */
const PALETTE = ["#FF7A59","#FFC857","#5DD39E","#6C8AE4","#FF89C0","#8BD3DD","#E7E9EB","#A1E4A3","#F6D6D6","#B4A0FF"];
const palette = $("#palette");
let currentColor = PALETTE[0];
function renderPalette(){
  palette.innerHTML="";
  PALETTE.forEach((col,i)=>{
    const d = document.createElement("button");
    d.className = "swatch"+(i===0?" selected":"");
    d.style.background = col;
    d.title = col;
    d.addEventListener("click", ()=>{
      $$(".swatch").forEach(s=> s.classList.remove("selected"));
      d.classList.add("selected");
      currentColor = col;
    });
    palette.appendChild(d);
  });
}
renderPalette();

$("#flower").addEventListener("click", (e)=>{
  const t = e.target;
  if(t.classList.contains("paintable")){
    t.setAttribute("fill", currentColor);
  }
});
$("#clearPaint").addEventListener("click", ()=>{
  $$("#flower .paintable").forEach(p=>{
    const def = p.getAttribute("data-default");
    p.setAttribute("fill", def || "#FFFFFF");
  });
});
</script>
</body>
</html>
